{"version":3,"sources":["src/react-dom/dom.js","src/react-dom/diff.js","src/react/set-state-queue.js","src/react/component.js","src/react/create-element.js","src/react/index.js","src/react-dom/render.js","src/react-dom/index.js","src/index.js"],"names":["setAttribute","dom","name","value","test","toLowerCase","style","cssText","removeAttribute","diff","vnode","container","ret","diffNode","parentNode","appendChild","out","undefined","String","nodeType","textContent","document","createTextNode","replaceChild","tag","diffComponent","isSameNodeType","createElement","childNodes","map","children","length","diffChildren","diffAttributes","vchildren","domChildren","keyed","i","child","key","push","min","childrenLen","vchild","j","c","f","nextSibling","removeNode","insertBefore","_component","oldDom","constructor","setComponentProps","attrs","base","unmountComponent","createComponent","component","props","componentWillMount","componentWillReceiveProps","renderComponent","renderer","render","componentWillUpdate","componentDidUpdate","componentDidMount","inst","prototype","Component","componentWillUnmount","nodeName","old","attributes","attr","removeChild","setStateQueue","renderQueue","defer","fn","Promise","resolve","then","enqueueSetState","stateChange","flush","some","item","shift","prevState","Object","assign","state","isReactComponent","App","num","setState","console","log","React","ReactDOM","getElementById"],"mappings":"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","file":"src.a2b27638.map","sourceRoot":"..","sourcesContent":["export function setAttribute( dom, name, value ) {\n    // 如果属性名是class，则改回className\n    if ( name === 'className' ) name = 'class';\n\n    // 如果属性名是onXXX，则是一个时间监听方法\n    if ( /on\\w+/.test( name ) ) {\n        name = name.toLowerCase();\n        dom[ name ] = value || '';\n    // 如果属性名是style，则更新style对象\n    } else if ( name === 'style' ) {\n        if ( !value || typeof value === 'string' ) {\n            dom.style.cssText = value || '';\n        } else if ( value && typeof value === 'object' ) {\n            for ( const name in value ) {\n                // 可以通过style={ width: 20 }这种形式来设置样式，可以省略掉单位px\n                dom.style[ name ] = typeof value[ name ] === 'number' ? value[ name ] + 'px' : value[ name ];\n            }\n        }\n    // 普通属性则直接更新属性\n    } else {\n        if ( name in dom ) {\n            dom[ name ] = value || '';\n        }\n        if ( value ) {\n            dom.setAttribute( name, value );\n        } else {\n            dom.removeAttribute( name, value );\n        }\n    }\n}","import { Component } from '../react'\nimport { setAttribute } from './dom'\n\n/**\n * @param {HTMLElement} dom 真实DOM\n * @param {vnode} vnode 虚拟DOM\n * @param {HTMLElement} container 容器\n * @returns {HTMLElement} 更新后的DOM\n */\nexport function diff( dom, vnode, container ) {\n\n    const ret = diffNode( dom, vnode );\n\n    if ( container && ret.parentNode !== container ) {\n        container.appendChild( ret );\n    }\n\n    return ret;\n\n}\n\nfunction diffNode( dom, vnode ) {\n\n    let out = dom;\n\n    if ( vnode === undefined || vnode === null || typeof vnode === 'boolean' ) vnode = '';\n\n    if ( typeof vnode === 'number' ) vnode = String( vnode );\n\n    // diff text node\n    if ( typeof vnode === 'string' ) {\n\n        // 如果当前的DOM就是文本节点，则直接更新内容\n        if ( dom && dom.nodeType === 3 ) {    // nodeType: https://developer.mozilla.org/zh-CN/docs/Web/API/Node/nodeType\n            if ( dom.textContent !== vnode ) {\n                dom.textContent = vnode;\n            }\n        // 如果DOM不是文本节点，则新建一个文本节点DOM，并移除掉原来的\n        } else {\n            out = document.createTextNode( vnode );\n            if ( dom && dom.parentNode ) {\n                dom.parentNode.replaceChild( out, dom );\n            }\n        }\n\n        return out;\n    }\n\n    if ( typeof vnode.tag === 'function' ) {\n        return diffComponent( dom, vnode );\n    }\n\n    //\n    if ( !dom || !isSameNodeType( dom, vnode ) ) {\n        out = document.createElement( vnode.tag );\n\n        if ( dom ) {\n            [ ...dom.childNodes ].map( out.appendChild );    // 将原来的子节点移到新节点下\n\n            if ( dom.parentNode ) {\n                dom.parentNode.replaceChild( out, dom );    // 移除掉原来的DOM对象\n            }\n        }\n    }\n\n    if ( vnode.children && vnode.children.length > 0 || ( out.childNodes && out.childNodes.length > 0 ) ) {\n        diffChildren( out, vnode.children );\n    }\n\n    diffAttributes( out, vnode );\n\n    return out;\n\n}\n\nfunction diffChildren( dom, vchildren ) {\n\n    const domChildren = dom.childNodes;\n    const children = [];\n\n    const keyed = {};\n\n    if ( domChildren.length > 0 ) {\n        for ( let i = 0; i < domChildren.length; i++ ) {\n            const child = domChildren[ i ];\n            const key = child.key;\n            if ( key ) {\n                keyed[ key ] = child;\n            } else {\n                children.push( child );\n            }\n        }\n    }\n\n    if ( vchildren && vchildren.length > 0 ) {\n\n        let min = 0;\n        let childrenLen = children.length;\n\n        for ( let i = 0; i < vchildren.length; i++ ) {\n\n            const vchild = vchildren[ i ];\n            const key = vchild.key;\n            let child;\n\n            if ( key ) {\n\n                if ( keyed[ key ] ) {\n                    child = keyed[ key ];\n                    keyed[ key ] = undefined;\n                }\n\n            } else if ( min < childrenLen ) {\n\n                for ( let j = min; j < childrenLen; j++ ) {\n\n                    const c = children[ j ];\n\n                    if ( c && isSameNodeType( c, vchild ) ) {\n\n                        child = c;\n                        children[ j ] = undefined;\n\n                        if ( j === childrenLen - 1 ) childrenLen--;\n                        if ( j === min ) min++;\n                        break;\n\n                    }\n\n                }\n\n            }\n\n            child = diffNode( child, vchild );\n\n            const f = domChildren[ i ];\n            if ( child && child !== dom && child !== f ) {\n                if ( !f ) {\n                    dom.appendChild( child );\n                } else if ( child === f.nextSibling ) {\n                    removeNode( f );\n                } else {\n                    dom.insertBefore( child, f );\n                }\n            }\n\n        }\n    }\n\n}\n\nfunction diffComponent( dom, vnode ) {\n\n    let c = dom && dom._component;\n    let oldDom = dom;\n\n    // 如果组件类型没有变化，则重新set props\n    if ( c && c.constructor === vnode.tag ) {\n        setComponentProps( c, vnode.attrs );\n        dom = c.base;\n    // 如果组件类型变化，则移除掉原来组件，并渲染新的组件\n    } else {\n\n        if ( c ) {\n            unmountComponent( c );\n            oldDom = null;\n        }\n\n        c = createComponent( vnode.tag, vnode.attrs );\n\n        setComponentProps( c, vnode.attrs );\n        dom = c.base;\n\n        if ( oldDom && dom !== oldDom ) {\n            oldDom._component = null;\n            removeNode( oldDom );\n        }\n\n    }\n\n    return dom;\n\n}\n\nfunction setComponentProps( component, props ) {\n\n    if ( !component.base ) {\n        if ( component.componentWillMount ) component.componentWillMount();\n    } else if ( component.componentWillReceiveProps ) {\n        component.componentWillReceiveProps( props );\n    }\n\n    component.props = props;\n\n    renderComponent( component );\n\n}\n\nexport function renderComponent( component ) {\n\n    let base;\n\n    const renderer = component.render();\n\n    if ( component.base && component.componentWillUpdate ) {\n        component.componentWillUpdate();\n    }\n\n    base = diffNode( component.base, renderer );\n\n    if ( component.base ) {\n        if ( component.componentDidUpdate ) component.componentDidUpdate();\n    } else if ( component.componentDidMount ) {\n        component.componentDidMount();\n    }\n\n    component.base = base;\n    base._component = component;\n\n}\n\nfunction createComponent( component, props ) {\n\n    let inst;\n\n    if ( component.prototype && component.prototype.render ) {\n        /* eslint-disable-next-line new-cap */\n        inst = new component( props );\n    } else {\n        inst = new Component( props );\n        inst.constructor = component;\n        inst.render = function () {\n            return this.constructor( props );\n        }\n    }\n\n    return inst;\n\n}\n\nfunction unmountComponent( component ) {\n    if ( component.componentWillUnmount ) component.componentWillUnmount();\n    removeNode( component.base );\n}\n\nfunction isSameNodeType( dom, vnode ) {\n    if ( typeof vnode === 'string' || typeof vnode === 'number' ) {\n        return dom.nodeType === 3;\n    }\n\n    if ( typeof vnode.tag === 'string' ) {\n        return dom.nodeName.toLowerCase() === vnode.tag.toLowerCase();\n    }\n\n    return dom && dom._component && dom._component.constructor === vnode.tag;\n}\n\nfunction diffAttributes( dom, vnode ) {\n\n    const old = {};    // 当前DOM的属性\n    const attrs = vnode.attrs;     // 虚拟DOM的属性\n\n    for ( let i = 0; i < dom.attributes.length; i++ ) {\n        const attr = dom.attributes[ i ];\n        old[ attr.name ] = attr.value;\n    }\n\n    // 如果原来的属性不在新的属性当中，则将其移除掉（属性值设为undefined）\n    for ( const name in old ) {\n\n        if ( !( name in attrs ) ) {\n            setAttribute( dom, name, undefined );\n        }\n\n    }\n\n    // 更新新的属性值\n    for ( const name in attrs ) {\n\n        if ( old[ name ] !== attrs[ name ] ) {\n            setAttribute( dom, name, attrs[ name ] );\n        }\n\n    }\n\n}\n\nfunction removeNode( dom ) {\n\n    if ( dom && dom.parentNode ) {\n        dom.parentNode.removeChild( dom );\n    }\n\n}","\nimport { renderComponent } from '../react-dom/diff'\n\nconst setStateQueue = [];\nconst renderQueue = [];\n\nfunction defer( fn ) {\n    return Promise.resolve().then( fn );\n}\n\nexport function enqueueSetState( stateChange, component ) {\n\n    if ( setStateQueue.length === 0 ) {\n        defer( flush );\n    }\n    setStateQueue.push( {\n        stateChange,\n        component\n    } );\n\n    if ( !renderQueue.some( item => item === component ) ) {\n        renderQueue.push( component );\n    }\n}\n\nfunction flush() {\n    let item, component;\n\n    /* eslint-disable-next-line no-cond-assign */\n    while ( item = setStateQueue.shift() ) {\n\n        const { stateChange, component } = item;\n\n        // 如果没有prevState，则将当前的state作为初始的prevState\n        if ( !component.prevState ) {\n            component.prevState = Object.assign( {}, component.state );\n        }\n\n        // 如果stateChange是一个方法，也就是setState的第二种形式\n        if ( typeof stateChange === 'function' ) {\n            Object.assign( component.state, stateChange( component.prevState, component.props ) );\n        } else {\n            // 如果stateChange是一个对象，则直接合并到setState中\n            Object.assign( component.state, stateChange );\n        }\n\n        component.prevState = component.state;\n\n    }\n\n    /* eslint-disable-next-line no-cond-assign */\n    while ( component = renderQueue.shift() ) {\n        renderComponent( component );\n    }\n\n}","import { enqueueSetState } from './set-state-queue'\n\nclass Component {\n    constructor( props = {} ) {\n        this.isReactComponent = true;\n\n        this.state = {};\n        this.props = props;\n    }\n\n    setState( stateChange ) {\n        enqueueSetState( stateChange, this );\n    }\n}\n\nexport default Component;","function createElement( tag, attrs, ...children ) {\n\n    attrs = attrs || {};\n\n    return {\n        tag,\n        attrs,\n        children,\n        key: attrs.key || null\n    }\n}\n\nexport default createElement;","import Component from './component.js'\nimport createElement from './create-element.js'\n\nexport default {\n    Component,\n    createElement\n}","import { diff } from './diff'\n\n\nfunction render( vnode, container, dom ) {\n    return diff( dom, vnode, container );\n}\n\nexport default render;\n","import render from './render'\n\nexport default {\n    render\n}","import React from './react'\nimport ReactDOM from './react-dom'\n\nclass App extends React.Component {\n    constructor() {\n        super();\n        this.state = {\n            num: 0\n        }\n    }\n    componentDidMount() {\n        for ( let i = 0; i < 100; i++ ) {\n            this.setState( prevState => {\n                console.log( prevState.num );\n                return {\n                    num: prevState.num + 1\n                }\n            } );\n        }\n    }\n    componentDidUpdate() {\n        console.log( 'update' )\n    }\n    render() {\n        return ( <div className='App'>\n            <h1>{this.state.num}</h1>\n        </div> );\n    }\n}\n\nReactDOM.render(\n    <App />,\n    document.getElementById( 'root' )\n);"]}