{"version":3,"sources":["src/react-dom/dom.js","src/react-dom/diff.js","src/react/component.js","src/react/create-element.js","src/react/index.js","src/react-dom/render.js","src/react-dom/index.js","src/index.js"],"names":["setAttribute","dom","name","value","test","toLowerCase","node","style","cssText","removeAttribute","diff","vnode","container","ret","diffNode","parentNode","appendChild","out","undefined","String","nodeType","textContent","document","createTextNode","replaceChild","tag","diffComponent","isSameNodeType","createElement","childNodes","map","children","length","diffChildren","diffAttributes","vchildren","domChildren","keyed","i","child","key","keyedLen","push","min","childrenLen","vchild","j","c","f","nextSibling","removeNode","insertBefore","_component","oldDom","constructor","setComponentProps","attrs","base","unmountComponent","createComponent","component","props","componentWillMount","componentWillReceiveProps","renderComponent","renderer","render","componentWillUpdate","componentDidUpdate","componentDidMount","inst","prototype","Component","componentWillUnmount","nodeName","old","attributes","attr","removeChild","isReactComponent","state","stateChange","Object","assign","Welcome","React","Counter","num","console","log","setState","onClick","ReactDOM","getElementById"],"mappings":"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","file":"src.a2b27638.map","sourceRoot":"..","sourcesContent":["export function setAttribute( dom, name, value ) {\n    // 如果属性名是class，则改回className\n    if ( name === 'className' ) name = 'class';\n\n    // 如果属性名是onXXX，则是一个时间监听方法\n    if ( /on\\w+/.test( name ) ) {\n        name = name.toLowerCase();\n        dom[ name ] = value || '';\n    // 如果属性名是style，则更新style对象\n    } else if ( name === 'style' ) {\n        if ( !value || typeof value === 'string' ) {\n            node.style.cssText = value || '';\n        } else if ( value && typeof value === 'object' ) {\n            for ( let name in value ) {\n                // 可以通过style={ width: 20 }这种形式来设置样式，可以省略掉单位px\n                dom.style[ name ] = typeof value[ name ] === 'number' ? value[ name ] + 'px' : value[ name ];\n            }\n        }\n    // 普通属性则直接更新属性\n    } else {\n        if ( name in dom ) {\n            dom[ name ] = value || '';\n        }\n        if ( value ) {\n            dom.setAttribute( name, value );\n        } else {\n            dom.removeAttribute( name, value );\n        }\n    }\n}\n","import { Componet } from '../react'\nimport { setAttribute } from './dom'\n\n/**\n * @param {HTMLElement} dom 真实DOM\n * @param {vnode} vnode 虚拟DOM\n * @param {HTMLElement} container 容器\n * @returns {HTMLElement} 更新后的DOM\n */\nexport function diff( dom, vnode, container ) {\n\n    const ret = diffNode( dom, vnode );\n\n    if ( container && ret.parentNode !== container ) {\n        container.appendChild( ret );\n    }\n\n    return ret;\n\n}\n// 对比\nfunction diffNode( dom, vnode ) {\n\n    let out = dom;\n\n    if ( vnode === undefined || vnode === null || typeof vnode === 'boolean' ) vnode = '';\n\n    if ( typeof vnode === 'number' ) vnode = String( vnode );\n\n    // diff text node 对比文本节点\n    if ( typeof vnode === 'string' ) {\n\n        // 如果当前的DOM就是文本节点，则直接更新内容\n        if ( dom && dom.nodeType === 3 ) {    // nodeType: https://developer.mozilla.org/zh-CN/docs/Web/API/Node/nodeType\n            if ( dom.textContent !== vnode ) {\n                dom.textContent = vnode;\n            }\n        // 如果DOM不是文本节点，则新建一个文本节点DOM，并移除掉原来的\n        } else {\n            out = document.createTextNode( vnode );\n            if ( dom && dom.parentNode ) {\n                dom.parentNode.replaceChild( out, dom );\n            }\n        }\n\n        return out;\n    }\n    // 如果是组件 那就对比组件\n    if ( typeof vnode.tag === 'function' ) {\n        return diffComponent( dom, vnode );\n    }\n    // 对比非文本Dom节点\n    //判断节点的类型是否一致 如果不一致那就新建一个Dom元素  将原来的子节点（如果有的话 移动到新建立的dom节点下）\n    if ( !dom || !isSameNodeType( dom, vnode ) ) {\n        out = document.createElement( vnode.tag );\n\n        if ( dom ) {\n            [ ...dom.childNodes ].map( out.appendChild );    // 将原来的子节点移到新节点下\n\n            if ( dom.parentNode ) {\n                dom.parentNode.replaceChild( out, dom );    // 移除掉原来的DOM对象\n            }\n        }\n    }\n    // 对比子节点 （给节点设一个key值，重新渲染时对比key值相同的节点。）\n    if ( vnode.children && vnode.children.length > 0 || ( out.childNodes && out.childNodes.length > 0 ) ) {\n        diffChildren( out, vnode.children );\n    }\n    // 对比属性\n    diffAttributes( out, vnode );\n\n    return out;\n\n}\n\nfunction diffChildren( dom, vchildren ) {\n\n    const domChildren = dom.childNodes;\n    const children = [];\n\n    const keyed = {};\n\n    if ( domChildren.length > 0 ) {\n        for ( let i = 0; i < domChildren.length; i++ ) {\n            const child = domChildren[ i ];\n            const key = child.key;\n            if ( key ) {\n                keyedLen++;\n                keyed[ key ] = child;\n            } else {\n                children.push( child );\n            }\n        }\n    }\n\n    if ( vchildren && vchildren.length > 0 ) {\n\n        let min = 0;\n        let childrenLen = children.length;\n\n        for ( let i = 0; i < vchildren.length; i++ ) {\n\n            const vchild = vchildren[ i ];\n            const key = vchild.key;\n            let child;\n            // 如果有key，找到对应key值的节点\n            if ( key ) {\n                if ( keyed[ key ] ) {\n                    child = keyed[ key ];\n                    keyed[ key ] = undefined;\n                }\n                // 如果没有key，则优先找类型相同的节点\n            } else if ( min < childrenLen ) {\n\n                for ( let j = min; j < childrenLen; j++ ) {\n\n                    let c = children[ j ];\n\n                    if ( c && isSameNodeType( c, vchild ) ) {\n\n                        child = c;\n                        children[ j ] = undefined;\n\n                        if ( j === childrenLen - 1 ) childrenLen--;\n                        if ( j === min ) min++;\n                        break;\n\n                    }\n\n                }\n\n            }\n            // 对比\n            child = diffNode( child, vchild );\n              // 更新dom\n            const f = domChildren[ i ];\n            if ( child && child !== dom && child !== f ) {\n                // 如果更新前的对应位置为空 说明此节点是新增的\n                if ( !f ) {\n                    dom.appendChild(child);\n                    // 如果更新后的节点和更新前对应位置的下一个节点一样儿 说明当前的节点被移除了\n                } else if ( child === f.nextSibling ) {\n                    removeNode( f );\n                    // 将更新后的节点移动到正确的位置\n                } else {\n                    // 第一个参数 要插入的节点 第二个参数是已经存在的节点\n                    dom.insertBefore( child, f );\n                }\n            }\n\n        }\n    }\n\n}\n\n// 对比组件\nfunction diffComponent( dom, vnode ) {\n\n    let c = dom && dom._component;\n    let oldDom = dom;\n\n    // 如果组件类型没有变化，则重新set props\n    if ( c && c.constructor === vnode.tag ) {\n        setComponentProps( c, vnode.attrs );\n        dom = c.base;\n    // 如果组件类型变化，则移除掉原来组件，并渲染新的组件\n    } else {\n\n        if ( c ) {\n            unmountComponent( c );\n            oldDom = null;\n        }\n\n        c = createComponent( vnode.tag, vnode.attrs );\n\n        setComponentProps( c, vnode.attrs );\n        dom = c.base;\n\n        if ( oldDom && dom !== oldDom ) {\n            oldDom._component = null;\n            removeNode( oldDom );\n        }\n\n    }\n\n    return dom;\n\n}\n\nfunction setComponentProps( component, props ) {\n\n    if ( !component.base ) {\n        if ( component.componentWillMount ) component.componentWillMount();\n    } else if ( component.componentWillReceiveProps ) {\n        component.componentWillReceiveProps( props );\n    }\n\n    component.props = props;\n\n    renderComponent( component );\n\n}\n\nexport function renderComponent( component ) {\n\n    let base;\n\n    const renderer = component.render();\n\n    if ( component.base && component.componentWillUpdate ) {\n        component.componentWillUpdate();\n    }\n\n    base = diffNode( component.base, renderer );\n\n    component.base = base;\n    base._component = component;\n\n    if ( component.base ) {\n        if ( component.componentDidUpdate ) component.componentDidUpdate();\n    } else if ( component.componentDidMount ) {\n        component.componentDidMount();\n    }\n\n    component.base = base;\n    base._component = component;\n\n}\n\nfunction createComponent( component, props ) {\n\n    let inst;\n\n    if ( component.prototype && component.prototype.render ) {\n        inst = new component( props );\n    } else {\n        inst = new Component( props );\n        inst.constructor = component;\n        inst.render = function() {\n            return this.constructor( props );\n        }\n    }\n\n    return inst;\n\n}\n\nfunction unmountComponent( component ) {\n    if ( component.componentWillUnmount ) component.componentWillUnmount();\n    removeNode( component.base);\n}\n\n// 是否是同一种节点类型\nfunction isSameNodeType( dom, vnode ) {\n    if ( typeof vnode === 'string' || typeof vnode === 'number' ) {\n        return dom.nodeType === 3;\n    }\n\n    if ( typeof vnode.tag === 'string' ) {\n        return dom.nodeName.toLowerCase() === vnode.tag.toLowerCase();\n    }\n\n    return dom && dom._component && dom._component.constructor === vnode.tag;\n}\n\nfunction diffAttributes( dom, vnode ) {\n\n    const old = {};    // 当前DOM的属性\n    const attrs = vnode.attrs;     // 虚拟DOM的属性\n\n    for ( let i = 0 ; i < dom.attributes.length; i++ ) {\n        const attr = dom.attributes[ i ];\n        old[ attr.name ] = attr.value;\n    }\n\n    // 如果原来的属性不在新的属性当中，则将其移除掉（属性值设为undefined）\n    for ( let name in old ) {\n\n        if ( !( name in attrs ) ) {\n            setAttribute( dom, name, undefined );\n        }\n\n    }\n\n    // 更新新的属性值\n    for ( let name in attrs ) {\n\n        if ( old[ name ] !== attrs[ name ] ) {\n            setAttribute( dom, name, attrs[ name ] );\n        }\n\n    }\n\n}\n\n// 移除节点\nfunction removeNode( dom ) {\n\n    if ( dom && dom.parentNode ) {\n        dom.parentNode.removeChild( dom );\n    }\n\n}\n","import { renderComponent } from '../react-dom/diff'\n\nclass Component {\n    constructor( props = {} ) {\n        this.isReactComponent = true;\n\n        this.state = {};\n        this.props = props;\n    }\n\n    setState( stateChange ) {\n        Object.assign( this.state, stateChange );\n        renderComponent( this );\n    }\n}\n\nexport default Component;","import Component from './component.js'\n\nfunction createElement( tag, attrs, ...children ) {\n\n    attrs = attrs || {};\n\n    return {\n        tag,\n        attrs,\n        children,\n        key: attrs.key || null\n    }\n}\n\nexport default createElement;","import Component from './component.js'\nimport createElement from './create-element.js'\n\nexport default {\n    Component,\n    createElement\n}","import { diff } from './diff'\n\n\nfunction render( vnode, container, dom ) {\n    return diff( dom, vnode, container );\n}\n\nexport default render;\n","import render from './render'\n\nexport default {\n    render\n}","import React from './react/index.js'\nimport ReactDOM from './react-dom/index.js'\n\nclass Welcome extends React.Component {\n    render() {\n        return <span>Hello, {this.props.name}</span>;\n    }\n}\n\nclass  Counter extends React.Component {\n    constructor(props){\n        super(props);\n        this.state = {\n            num:1\n        }\n\n    }\n    componentWillUpdate() {\n        console.log( 'update' );\n    }\n\n    componentWillMount() {\n        console.log( 'mount' );\n    }\n\n    onClick(){\n        this.setState({\n            num:this.state.num + 1\n        })\n    }\n\n    render(){\n        return(\n            <div>\n                <Welcome name=\"sadc\" />\n                <Welcome name=\"lazy\" />\n                <Welcome name=\"safari\" />\n                <h1>hello yishu</h1>\n                <h1>count:{this.state.num}</h1>\n                <button onClick={()=>this.onClick()}>add</button>\n            </div>\n        )\n    }\n}\n\n\nReactDOM.render(\n    <Counter />,\n    document.getElementById('root')\n)"]}